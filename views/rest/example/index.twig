{# View Information #}
{% set title = 'Test Client' %}
{% extends "template/default.twig" %}

{# OnLoad Block #}{% block onload %}

$('#client_test_form').on('submit', submit_form);

$('#add_param').on('click', add_param);

{% endblock onload %}{# End OnLoad Block #}

{# Resources Block #}{% block resources %}

function add_param (event) {
	$('#params').append('<br/><div class="controls"> \
		<input type="text" name="keys[]" value="" placeholder="Key" /> \
		<input type="text" name="values[]" placeholder="Value" /> \
	</div>');
	event.preventDefault();
}

function submit_form () {
	console.log($('form#client_test_form').serialize());
	$.post('rest_example/process', $('form#client_test_form').serialize(), submit_form_success);
	event.preventDefault();
}

function submit_form_success (data) {
	$('#response').html(data);
}

{% endblock resources %}{# End Resources Block #}

{# Content Block #}{% block content %}

<div class="row">
	<div class="span6">
		<form id="client_test_form" class="form-horizontal">
			<div class="control-group">
				<label class="control-label" for="method">Method</label>
				<div class="controls">
					<select id="method" name="method">
						<option>GET</option>
						<option>POST</option>
						<option>PUT</option>
						<option>DELETE</option>
					</select>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="controller">Controller</label>
				<div class="controls">
					<select id="controller" name="controller">
						<option>select a controller</option>
					</select>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="action">Action</label>
				<div class="controls">
					<select  id="action" name="action">
						<option>first select a controller</option>
					</select>
				</div>
			</div>
			<div id="params" class="control-group">
				<label class="control-label" for="controller">Params</label>
				<div class="controls">
					<input class="span3" type="text" name="keys[]" value="" placeholder="Key" />
					<input class="span3" type="text" name="values[]" value="" placeholder="Value" />
				</div>
			</div>
			<div class="form-actions">
				<div class="btn-group">
					<button type="submit" class="btn btn-primary">Submit</button>
					<button type="button" id="add_param" class="btn btn-info">Add Param</button>
				</div>
			</div>
		</form>
	</div>

	<div class="span6">
		<pre id="response" class="well">

		</pre>
	</div>
</div>

{% endblock content %}{# End Content Block #}